#Docker
* Docker - сервис для запуска приложений в контейнерах (клиент, служба, хост)
  * приложения запускаются в изолированной среде
  * легко запускать приложения на разных серверах
  * все зависимости приложений устанавливаются внутри контейнеров
  * легко масштабировать путем увеличения количества контейнеров
  * очень удобно использовать в процессе разработки приложений
* Контейнер - это самый элемент в мире docker, где запускаются приложения (виртуальная машина)
* Образ - это шаблон, на основе которого создается контейнер, существует отдельно и не может быть изменен.
  * для создания образа необходим Dockerfile
  * обычно Dockerfile помещают в корне папки приложения
  * Dockerfile содержит инструкции по созданию образа
  * при создании образа можно указать имя и тег для образа, инача присвоится рандомный ID
  * на основании готового образа можно создавать контейнеры
* Репозиторий - различные версии образа
* Реестр - различные репозитории



* docker - вывод всех комманд
* docker ps - список запущенных контейнеров
* docker ps -a - список всех контейнеров
* docker pull {name} - получить какой-либо образ из центрального репозитория 
* docker images - список всех  образов
* docker run {name} - создаёт и запускает контейнер
* docker run -it {name} - запуск контейнера
* docker run -d {name} - запуск контейнера в фоновом режиме
* docker rm {id} - удалить контейнер
* docker container inspect {id} - детали определённого контейнера
* docker stop {id} - остановка контейнера
* docker exec -it {id} {process} - запустить процесс на определённом контейнере
* docker run -p {port}:{port} {name} - открыть доступ сервису внутри контейнера
* docker run -v ${PWD}:/usr/share/nginx/html nginx -
* docker container prune - удаление всех остановленных контейнеров
* docker exec -it --rm {name} - автоматическое удаление всех остановленных контейнеров
* docker exec -it {id} sh - попадаем в консоль контейнера
* docker build {path} (-t название:тег) - запуск процесса создания нового образа
* docker-compose up - запуск процессов docker-compose.yaml
* docker-compose down - остановка и удаление всех процессов и сеть docker-compose.yaml
* docker-compose up -d --build - создание всех необходимых образов заново
* docker logs {id} - вывод логов конкретного контейнера
* docker run -d -e {key}={value} {id} - назначение переменных среды
* docker login - логинимся на docker hub
* docker push {name} - загрузка образа на docker hub

###Dockerfile
<pre>
FROM python(имя базового образа):apline(тег базового образа)
WORKDIR /app - создается рабочая директория внутри образа
EXPOSE 3000 - (порт для указания другим разработчикам)
RUN pip install pymongo
COPY . .
CMD ["python", "main.py"] - какая команда будет выполнена когда создастся контейнер
</pre>

###Docker compose
docker compose - позволяет запускать несколько конейнеров
* декларативный подход к созданию контейнеров
* все необходимые контейнеры запускаются одной командой
* автоматическое создание необходимых образов на основании Dockerfile каждого приложения
* автоматическое создание изолированной сети для взаимодействия контейнеров
* благодаря DNS возможно взаимодействие между контейнерами, используя имена сервисов

<pre>
version: '3'
services:
  app:
    build: ./app (путь к папке где Dockerfile) - создание собственных образов
    ports:
      - '{port}:{port}' - публикация портов
    restart: always
    depends_on:
    volumes:
      - {containerf_path}
      - {local_path}
  mongo:
    image: mongo - использование образов из docker hub
    environment:- добавление переменных среды
      {key}: {value}
    volumes: 
      - {volumes_name}:{path}
volumes:
  {name}: - том внутри Docker Host 
</pre>
